var global;(global=window).CanvasScrollPlayer=function e(t){let{canvasId:r,imagePath:n,totalFrames:o,scrollContainer:i}=t,a=document.querySelector(r),h=a.getContext("2d"),l={currentIndex:0,maxIndex:o-1},d=[],g=0;function c(e){let t=d[e];if(!t||!t.complete)return;a.width=window.innerWidth,a.height=window.innerHeight;let r=a.width/t.width,n=a.height/t.height,o=Math.max(r,n),i=t.width*o,g=t.height*o,c=(a.width-i)/2,m=(a.height-g)/2;h.clearRect(0,0,a.width,a.height),h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high",h.drawImage(t,c,m,i,g),l.currentIndex=e}function m(){let e=gsap.timeline({scrollTrigger:{trigger:i,start:"top top",end:"bottom bottom",scrub:2}});e.to(l,{currentIndex:l.maxIndex,onUpdate:()=>c(Math.floor(l.currentIndex)),ease:"none"}),ScrollTrigger.refresh()}!function e(){for(let t=1;t<=o;t++){let r=`${n}/frame_${t.toString().padStart(4,"0")}.jpeg`,i=new Image;i.src=r,i.onload=()=>{++g===o&&(c(l.currentIndex),m())},i.onerror=()=>{console.error("Failed to load image:",r)},d.push(i)}}()};